<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.59" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://github.com/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html"><meta property="og:site_name" content="Anakin's blog"><meta property="og:title" content="MySQL学习记录"><meta property="og:description" content="MySQl语句练习 使用数据库 show databases; use atguigudb;"><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-01-12T03:22:01.000Z"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="MySQL"><meta property="article:modified_time" content="2023-01-12T03:22:01.000Z"><link rel="alternate" hreflang="en-us" href="https://github.com/zar_blog/enposts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html"><title>MySQL学习记录 | Anakin's blog</title><meta name="description" content="MySQl语句练习 使用数据库 show databases; use atguigudb;">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/zar_blog/assets/style-9dbb957f.css" as="style"><link rel="stylesheet" href="/zar_blog/assets/style-9dbb957f.css">
    <link rel="modulepreload" href="/zar_blog/assets/app-c1511fcf.js"><link rel="modulepreload" href="/zar_blog/assets/framework-5e2051d8.js"><link rel="modulepreload" href="/zar_blog/assets/MySQL学习记录.html-18be9042.js"><link rel="modulepreload" href="/zar_blog/assets/MySQL学习记录.html-52875443.js"><link rel="prefetch" href="/zar_blog/assets/index.html-0f0c6d37.js" as="script"><link rel="prefetch" href="/zar_blog/assets/intro.html-d4bbbff3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/slides.html-d6d44cce.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-65a284b1.js" as="script"><link rel="prefetch" href="/zar_blog/assets/disable.html-5b84c8b3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/encrypt.html-cccebd0f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/markdown.html-8bfd39ef.js" as="script"><link rel="prefetch" href="/zar_blog/assets/page.html-f14df13c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a1aa3d3d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/intro.html-6681b7f6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/slides.html-7e467f78.js" as="script"><link rel="prefetch" href="/zar_blog/assets/怎样选择基金.html-722ac139.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f47639f5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/disable.html-05f47c89.js" as="script"><link rel="prefetch" href="/zar_blog/assets/encrypt.html-e42ba00e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/markdown.html-1ba91045.js" as="script"><link rel="prefetch" href="/zar_blog/assets/page.html-841f5e1b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/cherry.html-88bd22e5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/dragonfruit.html-d93ba35d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/strawberry.html-1fbfd5ad.js" as="script"><link rel="prefetch" href="/zar_blog/assets/tomato.html-ec787ae5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Android基础知识.html-64f5e518.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Android日常记录.html-a2a3df18.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-69f7d9bf.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Java设计模式.html-ac387045.js" as="script"><link rel="prefetch" href="/zar_blog/assets/文件操作的工具类.html-a91af966.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-Builder模式.html-78c2c672.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-代理模式.html-7cdaa9d3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-单例模式.html-5adc23d2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-工厂方法模式.html-c816b8a0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-桥接模式.html-ad18174d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-模版模式.html-f18ef9d1.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-简单工厂模式.html-09948168.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-观察者模式.html-6420e0b6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/读取XML中的配置参数.html-b8b45baa.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-b7fb471e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Mac环境下使用docker部署可道云.html-1d68baf4.js" as="script"><link rel="prefetch" href="/zar_blog/assets/docker学习笔记.html-39d68aaa.js" as="script"><link rel="prefetch" href="/zar_blog/assets/docker安装mysql.html-d25d9978.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-IO编程.html-a09807bf.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-Python基础.html-cdf91eec.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-Python基础二.html-8e2e9ae2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-函数.html-218d04ce.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-函数式编程.html-11a92159.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-常用内建模块.html-040b3d94.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-模块.html-fb58e0e0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-正则表达式.html-5fc6c2f6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-线程和进程.html-bec614b9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-面向对象编程.html-1373148d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-面向对象高级编程.html-78caaaed.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-高级特性.html-9cd8b7a8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MYSQL的修改和删除.html-df2be386.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Mac下PostgreSQL配置和使用.html-762f7e02.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MySQL使用.html-d651add0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MySQL进阶-操作详解.html-ba300999.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Vim基本操作.html-ada37085.js" as="script"><link rel="prefetch" href="/zar_blog/assets/webpack5_base.html-8f467188.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-fa9881b6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/2.html-f387e4d3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/3.html-f3221730.js" as="script"><link rel="prefetch" href="/zar_blog/assets/4.html-426daea0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-29dfecd3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/2.html-8322094f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/3.html-91d58f49.js" as="script"><link rel="prefetch" href="/zar_blog/assets/4.html-659d1106.js" as="script"><link rel="prefetch" href="/zar_blog/assets/404.html-f9405b30.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7c42084f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-871032c0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-801785a7.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-74d923f2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-faeb1d90.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-d0e8d861.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f9fc698c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b77acab9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-308a1694.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e74cde42.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f59e6369.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-9aed3a30.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6f93db61.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-91bf3d1a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-42055233.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-556c6d42.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-cc403e62.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a044c24d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-39fa311d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-8fd38a5e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-898256ab.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-debe4906.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-8ac34626.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6929cce2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6454b396.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-45c1a0b3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-3a93946d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-ebce846b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-dd6a60ee.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e15e3ad8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-8beba742.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-d6c2614a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e133ed09.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e992afd5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4b026885.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a20bef24.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a0909cab.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-c609359a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-779e62b9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-60bfab86.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-88b89646.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4a3fb42f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-d8135abd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7ba06ef9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6343903b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-cdb01a42.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e09b8940.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6264b6ff.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7b2faf6e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-573b2a23.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-3dbb9e1e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-0b3521d4.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-692e53a7.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-ee12b73e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-922c78a9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-fcfcc6fd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f0f41c1a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b912037b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4c00e1f6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-308c2117.js" as="script"><link rel="prefetch" href="/zar_blog/assets/intro.html-595a1b2c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/slides.html-caf1299d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-3d4583c3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/disable.html-af7eb118.js" as="script"><link rel="prefetch" href="/zar_blog/assets/encrypt.html-e3f9ea16.js" as="script"><link rel="prefetch" href="/zar_blog/assets/markdown.html-59b1635c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/page.html-1a71ba90.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b0ee096f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/intro.html-b7c74e63.js" as="script"><link rel="prefetch" href="/zar_blog/assets/slides.html-5b5b8f2a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/怎样选择基金.html-74d74f9d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-35ba537b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/disable.html-c235c18a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/encrypt.html-6473a039.js" as="script"><link rel="prefetch" href="/zar_blog/assets/markdown.html-4e89a57f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/page.html-295ffc06.js" as="script"><link rel="prefetch" href="/zar_blog/assets/cherry.html-acbe75b5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/dragonfruit.html-d6f6b724.js" as="script"><link rel="prefetch" href="/zar_blog/assets/strawberry.html-3f119128.js" as="script"><link rel="prefetch" href="/zar_blog/assets/tomato.html-dd10ebed.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Android基础知识.html-8cfe79c5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Android日常记录.html-7b633e8f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4eeec9ba.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Java设计模式.html-59548e9e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/文件操作的工具类.html-61e904c6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-Builder模式.html-83e428cf.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-代理模式.html-33c87320.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-单例模式.html-2cdb72b1.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-工厂方法模式.html-d2312bd9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-桥接模式.html-c2a552d8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-模版模式.html-68ff9763.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-简单工厂模式.html-c075e320.js" as="script"><link rel="prefetch" href="/zar_blog/assets/设计模式-观察者模式.html-6524fae2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/读取XML中的配置参数.html-4a70c3bf.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-a4bc258d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Mac环境下使用docker部署可道云.html-543d8df9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/docker学习笔记.html-e186bbe0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/docker安装mysql.html-cd6a9981.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-IO编程.html-d1ee3c1a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-Python基础.html-c9047e54.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-Python基础二.html-69ee6dd5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-函数.html-358e8818.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-函数式编程.html-d83ade08.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-常用内建模块.html-4e87211b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-模块.html-407df823.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-正则表达式.html-bdcb5f17.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-线程和进程.html-9d46270a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-面向对象编程.html-363f92e7.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-面向对象高级编程.html-c4bdf735.js" as="script"><link rel="prefetch" href="/zar_blog/assets/自学Python-高级特性.html-b90b297b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MYSQL的修改和删除.html-ebe3eef4.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Mac下PostgreSQL配置和使用.html-45d068b8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MySQL使用.html-e47597af.js" as="script"><link rel="prefetch" href="/zar_blog/assets/MySQL进阶-操作详解.html-ce513dde.js" as="script"><link rel="prefetch" href="/zar_blog/assets/Vim基本操作.html-bfaf110d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/webpack5_base.html-6dfc5f6f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-55091478.js" as="script"><link rel="prefetch" href="/zar_blog/assets/2.html-ffe35890.js" as="script"><link rel="prefetch" href="/zar_blog/assets/3.html-dd05bb22.js" as="script"><link rel="prefetch" href="/zar_blog/assets/4.html-5272085c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/1.html-fa460777.js" as="script"><link rel="prefetch" href="/zar_blog/assets/2.html-2ad52ac4.js" as="script"><link rel="prefetch" href="/zar_blog/assets/3.html-474d1f57.js" as="script"><link rel="prefetch" href="/zar_blog/assets/4.html-5c5a1ab2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/404.html-bf708293.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-e86ef531.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-ce49c71f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-60ba922a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-5b9c1721.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-eeebcda8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-2b80bab3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-fd068d59.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-efd6f91a.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b7101448.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b173dce9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-dec0d6e1.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7af1ed8e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-55eafdd3.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-43592ed1.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7de7de26.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-21679ea6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7428946c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-3755973f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-61b9cd61.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-eb1f5ccd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-99ec343c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-b2ed9930.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f2981bd2.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a665f8b5.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-0d7c2831.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-33385d96.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-7c211851.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-212b3a47.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-9b916530.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-41df11af.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6823e3ff.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-bf4c51dd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-3b10d84c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a48acf41.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-369cf95f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-0154c87e.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-2ecc28bd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-564a4a72.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-dec9edec.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-49d23803.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-6d083358.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-c63b50ff.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-17066301.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-d26df785.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-176a5f3d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-39193931.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-859e5880.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-11ed61a8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-ad2c4627.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a3eb2bc6.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-f64195aa.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-813b5f11.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-8ccfa606.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-a324d8d7.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-fe0f7910.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4541b688.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-76d6827f.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-75864e3b.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index.html-4d63b179.js" as="script"><link rel="prefetch" href="/zar_blog/assets/giscus-cb5b3b13.js" as="script"><link rel="prefetch" href="/zar_blog/assets/auto-bcb4bc66.js" as="script"><link rel="prefetch" href="/zar_blog/assets/index-63dde3cb.js" as="script"><link rel="prefetch" href="/zar_blog/assets/flowchart.parse-0007e96c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/mermaid.esm.min-bc08675d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/mermaid-mindmap.esm.min-eee4e341.js" as="script"><link rel="prefetch" href="/zar_blog/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/zar_blog/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/zar_blog/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/zar_blog/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/zar_blog/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/zar_blog/assets/VuePlayground-cf647bdd.js" as="script"><link rel="prefetch" href="/zar_blog/assets/photoswipe.esm-a9093b7c.js" as="script"><link rel="prefetch" href="/zar_blog/assets/SearchResult-8fb2ba5d.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/zar_blog/" class="brand"><img class="logo" src="/zar_blog/logo.svg" alt="Anakin&#39;s blog"><!----><span class="site-name hide-in-pad">Anakin&#39;s blog</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zar_blog/" class="nav-link" aria-label="博客主页"><span class="font-icon icon iconfont icon-home" style=""></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zar_blog/demo/" class="nav-link" aria-label="演示"><span class="font-icon icon iconfont icon-discover" style=""></span>演示<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zar_blog/posts/java/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="Java设计模式"><span class="font-icon icon iconfont icon-java" style=""></span>Java设计模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB.html" class="nav-link" aria-label="文件操作的工具类"><span class="font-icon icon iconfont icon-java" style=""></span>文件操作的工具类<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-Builder%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-Builder模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-Builder模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-代理模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-代理模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-单例模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-单例模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-工厂方法模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-工厂方法模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-简单工厂模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-简单工厂模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-桥接模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-桥接模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E7%89%88%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-模版模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-模版模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="设计模式-观察者模式"><span class="font-icon icon iconfont icon-java" style=""></span>设计模式-观察者模式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/java/%E8%AF%BB%E5%8F%96XML%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0.html" class="nav-link" aria-label="读取XML中的配置参数"><span class="font-icon icon iconfont icon-java" style=""></span>读取XML中的配置参数<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Python"><span class="title"><span class="font-icon icon iconfont icon-python" style=""></span>Python</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-Python%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="自学Python-Python基础"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-Python基础<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-Python%E5%9F%BA%E7%A1%80%E4%BA%8C.html" class="nav-link" aria-label="自学Python-Python基础二"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-Python基础二<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-IO%E7%BC%96%E7%A8%8B.html" class="nav-link" aria-label="自学Python-IO编程"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-IO编程<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E5%87%BD%E6%95%B0.html" class="nav-link" aria-label="自学Python-函数"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-函数<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" class="nav-link" aria-label="自学Python-函数式编程"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-函数式编程<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E5%B8%B8%E7%94%A8%E5%86%85%E5%BB%BA%E6%A8%A1%E5%9D%97.html" class="nav-link" aria-label="自学Python-常用内建模块"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-常用内建模块<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E6%A8%A1%E5%9D%97.html" class="nav-link" aria-label="自学Python-模块"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-模块<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="nav-link" aria-label="自学Python-正则表达式"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-正则表达式<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E7%BA%BF%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B.html" class="nav-link" aria-label="自学Python-线程和进程"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-线程和进程<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.html" class="nav-link" aria-label="自学Python-面向对象编程"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-面向对象编程<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B.html" class="nav-link" aria-label="自学Python-面向对象高级编程"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-面向对象高级编程<!----></a></li><li class="dropdown-item"><a href="/zar_blog/posts/python/%E8%87%AA%E5%AD%A6Python-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html" class="nav-link" aria-label="自学Python-高级特性"><span class="font-icon icon iconfont icon-python" style=""></span>自学Python-高级特性<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="博文"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Android</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zar_blog/posts/android/Android%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="nav-link" aria-label="Android基础知识"><span class="font-icon icon iconfont icon-android" style=""></span>Android基础知识<!----></a></li><li class="dropdown-subitem"><a href="/zar_blog/posts/android/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95.html" class="nav-link" aria-label="Android日常记录"><span class="font-icon icon iconfont icon-android" style=""></span>Android日常记录<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaScript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zar_blog/posts/js/1.html" class="nav-link" aria-label="香蕉"><span class="font-icon icon iconfont icon-edit" style=""></span>香蕉<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Webpack</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zar_blog/posts/webpack/webpack5_base.html" class="nav-link" aria-label="webpack5的常用配置示例"><span class="font-icon icon iconfont icon-webpack5" style=""></span>webpack5的常用配置示例<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html" class="router-link-active router-link-exact-active nav-link active" aria-label="MySQL学习记录"><span class="font-icon icon iconfont icon-MySQL" style=""></span>MySQL学习记录<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zar_blog/posts/others/Mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2%E5%8F%AF%E9%81%93%E4%BA%91.html" class="nav-link" aria-label="Mac环境下使用docker部署可道云"><span class="font-icon icon iconfont icon-docker" style=""></span>Mac环境下使用docker部署可道云<!----></a></li></ul></li><li class="dropdown-item"><a href="/zar_blog/posts/%E6%80%8E%E6%A0%B7%E9%80%89%E6%8B%A9%E5%9F%BA%E9%87%91.html" class="nav-link" aria-label="怎样选择基金"><span class="font-icon icon iconfont icon-edit" style=""></span>怎样选择基金<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="V2 文档" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>V2 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html" class="router-link-active router-link-exact-active nav-link active" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="dropdown-item"><a href="/zar_blog/en" class="nav-link" aria-label="English"><!---->English<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://github.com//anran919" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><div class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></div><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zar_blog/" class="nav-link sidebar-link sidebar-page" aria-label="博客主页"><span class="font-icon icon iconfont icon-home" style=""></span>博客主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-creative" style=""></span><a href="/zar_blog/guide/" class="title">如何使用</a><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">文章</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Android</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Encrypt</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Js</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Others</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Python</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Sql</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/zar_blog/posts/sql/Mac%E4%B8%8BPostgreSQL%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="Mac PostgreSQL"><!---->Mac PostgreSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zar_blog/posts/sql/MySQL%E4%BD%BF%E7%94%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL使用.md"><!---->MySQL使用.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zar_blog/posts/sql/MySQL%E8%BF%9B%E9%98%B6-%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL基本操作.md"><!---->MySQL基本操作.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="MySQL学习记录"><span class="font-icon icon iconfont icon-MySQL" style=""></span>MySQL学习记录<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#使用数据库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用数据库"><!---->使用数据库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#重置密码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="重置密码"><!---->重置密码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运算符"><!---->运算符<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运算符"><!---->运算符<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符练习" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运算符练习"><!---->运算符练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符练习-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运算符练习"><!---->运算符练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#排序和分页" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="排序和分页"><!---->排序和分页<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#排序和分页-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="排序和分页"><!---->排序和分页<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#多表查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="多表查询"><!---->多表查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#union-和-union-all-联合查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="union  和 union all 联合查询"><!---->union  和 union all 联合查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#_7中join-实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7中join 实现"><!---->7中join 实现<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#自然连接" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自然连接"><!---->自然连接<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#单行函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="单行函数"><!---->单行函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#字符串函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="字符串函数"><!---->字符串函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#日期函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="日期函数"><!---->日期函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#流程控制函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="流程控制函数"><!---->流程控制函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-6" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#单行函数-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="单行函数"><!---->单行函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#聚合函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="---- 聚合函数 -----"><!---->---- 聚合函数 -----<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#group-by" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="group by"><!---->group by<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#聚合函数-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="---- 聚合函数 -----"><!---->---- 聚合函数 -----<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#子查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="---- 子查询 -----"><!---->---- 子查询 -----<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#多行子查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="多行子查询"><!---->多行子查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#相关子查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="相关子查询"><!---->相关子查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-8" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#子查询-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="---- 子查询 -----"><!---->---- 子查询 -----<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#数据的处理-增删改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据的处理-增删改"><!---->数据的处理-增删改<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#添加数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="添加数据"><!---->添加数据<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#数据处理之增删改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据处理之增删改"><!---->数据处理之增删改<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-9" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习2"><!---->练习2<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习3"><!---->练习3<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-10" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习"><!---->练习<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#视图" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="视图"><!---->视图<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#存储过程与函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="存储过程与函数"><!---->存储过程与函数<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#存储函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="存储函数"><!---->存储函数<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#系统变量和会话变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="系统变量和会话变量"><!---->系统变量和会话变量<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#自定义变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义变量"><!---->自定义变量<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#局部变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="局部变量"><!---->局部变量<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#流程控制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="流程控制"><!---->流程控制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#分支结构之if" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="分支结构之if"><!---->分支结构之if<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习1"><!---->练习1<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#游标使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="游标使用"><!---->游标使用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#申明-打开-使用-关闭" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="申明,打开,使用,关闭"><!---->申明,打开,使用,关闭<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#申明游标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="申明游标"><!---->申明游标<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#打开游标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="打开游标"><!---->打开游标<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#获取游标数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="获取游标数据"><!---->获取游标数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#关闭游标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="关闭游标"><!---->关闭游标<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#创建触发器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建触发器"><!---->创建触发器<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/zar_blog/posts/sql/MYSQL%E7%9A%84%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4.html" class="nav-link sidebar-link sidebar-page" aria-label="MySql的修改和删除.md"><!---->MySql的修改和删除.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Vim</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Webpack</span><span class="arrow right"></span></button><!----></section></li><li><!--[--><a href="/zar_blog/posts/%E6%80%8E%E6%A0%B7%E9%80%89%E6%8B%A9%E5%9F%BA%E9%87%91.html" class="nav-link sidebar-link sidebar-page" aria-label="怎样选择基金"><span class="font-icon icon iconfont icon-edit" style=""></span>怎样选择基金<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/zar_blog/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="介绍页"><span class="font-icon icon iconfont icon-info" style=""></span>介绍页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zar_blog/slides.html" class="nav-link sidebar-link sidebar-page" aria-label="幻灯片页"><span class="font-icon icon iconfont icon-slides" style=""></span>幻灯片页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-MySQL" style=""></span>MySQL学习记录</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/anran919" target="_blank" rel="noopener noreferrer">张安然</a></span><span property="author" content="张安然"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="category-item category3 clickable" role="navigation">MySQL</span><meta property="articleSection" content="MySQL"></span><span class="tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="tag-item tag-item3 clickable" role="navigation">MySQL</span><meta property="keywords" content="MySQL"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 36 分钟</span><meta property="timeRequired" content="PT36M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#使用数据库" class="router-link-active router-link-exact-active toc-link level3">使用数据库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#重置密码" class="router-link-active router-link-exact-active toc-link level3">重置密码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符" class="router-link-active router-link-exact-active toc-link level3">运算符</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符-1" class="router-link-active router-link-exact-active toc-link level3">运算符</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符练习" class="router-link-active router-link-exact-active toc-link level3">运算符练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#运算符练习-1" class="router-link-active router-link-exact-active toc-link level3">运算符练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#排序和分页" class="router-link-active router-link-exact-active toc-link level3">排序和分页</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#排序和分页-1" class="router-link-active router-link-exact-active toc-link level3">排序和分页</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-1" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-2" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#多表查询" class="router-link-active router-link-exact-active toc-link level3">多表查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#union-和-union-all-联合查询" class="router-link-active router-link-exact-active toc-link level3">union  和 union all 联合查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#_7中join-实现" class="router-link-active router-link-exact-active toc-link level3">7中join 实现</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#自然连接" class="router-link-active router-link-exact-active toc-link level3">自然连接</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-3" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-4" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#单行函数" class="router-link-active router-link-exact-active toc-link level3">单行函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#字符串函数" class="router-link-active router-link-exact-active toc-link level3">字符串函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#日期函数" class="router-link-active router-link-exact-active toc-link level3">日期函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#流程控制函数" class="router-link-active router-link-exact-active toc-link level3">流程控制函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-6" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#单行函数-1" class="router-link-active router-link-exact-active toc-link level3">单行函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#聚合函数" class="router-link-active router-link-exact-active toc-link level3">---- 聚合函数 -----</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#group-by" class="router-link-active router-link-exact-active toc-link level3">group by</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#聚合函数-1" class="router-link-active router-link-exact-active toc-link level3">---- 聚合函数 -----</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#子查询" class="router-link-active router-link-exact-active toc-link level3">---- 子查询 -----</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#多行子查询" class="router-link-active router-link-exact-active toc-link level3">多行子查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#相关子查询" class="router-link-active router-link-exact-active toc-link level3">相关子查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-8" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#子查询-1" class="router-link-active router-link-exact-active toc-link level3">---- 子查询 -----</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#数据的处理-增删改" class="router-link-active router-link-exact-active toc-link level2">数据的处理-增删改</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#添加数据" class="router-link-active router-link-exact-active toc-link level3">添加数据</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#数据处理之增删改" class="router-link-active router-link-exact-active toc-link level2">数据处理之增删改</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-9" class="router-link-active router-link-exact-active toc-link level3">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习2" class="router-link-active router-link-exact-active toc-link level3">练习2</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习3" class="router-link-active router-link-exact-active toc-link level3">练习3</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习-10" class="router-link-active router-link-exact-active toc-link level2">练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#视图" class="router-link-active router-link-exact-active toc-link level2">视图</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#存储过程与函数" class="router-link-active router-link-exact-active toc-link level2">存储过程与函数</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#存储函数" class="router-link-active router-link-exact-active toc-link level3">存储函数</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#系统变量和会话变量" class="router-link-active router-link-exact-active toc-link level2">系统变量和会话变量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#自定义变量" class="router-link-active router-link-exact-active toc-link level2">自定义变量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#局部变量" class="router-link-active router-link-exact-active toc-link level2">局部变量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#流程控制" class="router-link-active router-link-exact-active toc-link level2">流程控制</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#分支结构之if" class="router-link-active router-link-exact-active toc-link level3">分支结构之if</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#练习1" class="router-link-active router-link-exact-active toc-link level3">练习1</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#游标使用" class="router-link-active router-link-exact-active toc-link level2">游标使用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#申明-打开-使用-关闭" class="router-link-active router-link-exact-active toc-link level3">申明,打开,使用,关闭</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#申明游标" class="router-link-active router-link-exact-active toc-link level3">申明游标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#打开游标" class="router-link-active router-link-exact-active toc-link level3">打开游标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#获取游标数据" class="router-link-active router-link-exact-active toc-link level3">获取游标数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#关闭游标" class="router-link-active router-link-exact-active toc-link level3">关闭游标</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zar_blog/posts/sql/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95.html#创建触发器" class="router-link-active router-link-exact-active toc-link level2">创建触发器</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="mysql语句练习" tabindex="-1"><a class="header-anchor" href="#mysql语句练习" aria-hidden="true">#</a> MySQl语句练习</h1><h3 id="使用数据库" tabindex="-1"><a class="header-anchor" href="#使用数据库" aria-hidden="true">#</a> 使用数据库</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> atguigudb<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重置密码" tabindex="-1"><a class="header-anchor" href="#重置密码" aria-hidden="true">#</a> 重置密码</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">&#39;root&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> first_name <span class="token keyword">as</span> f_name<span class="token punctuation">,</span> last_name <span class="token keyword">as</span> l_name
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> department_id
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 计算年工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> salary <span class="token string">&quot;月工资&quot;</span><span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> <span class="token string">&quot;年工资&quot;</span><span class="token punctuation">,</span> commission_pct
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token identifier"><span class="token punctuation">`</span>order<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>-- 查询常量</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token string">&#39;hello&#39;</span>
<span class="token keyword">from</span> <span class="token identifier"><span class="token punctuation">`</span>order<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 显示表结构</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">describe</span> employees<span class="token punctuation">;</span>
<span class="token keyword">DESC</span> <span class="token identifier"><span class="token punctuation">`</span>employees<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 去重</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> job_id
<span class="token keyword">from</span> <span class="token identifier"><span class="token punctuation">`</span>employees<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- where</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;king&#39;</span>
  <span class="token operator">and</span> first_name <span class="token operator">=</span> <span class="token string">&#39;Steven&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习" tabindex="-1"><a class="header-anchor" href="#练习" aria-hidden="true">#</a> 练习</h3><p>-- 计算12个月的总工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string">&quot;12月基本工资&quot;</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 去除重复job_id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> job_id
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询工资大于12000 的员工的工资和姓名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询工号为167的员工的姓名和部门号</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">167</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 显示departments的表结构,并查询全部数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">desc</span> departments<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> departments<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="运算符" tabindex="-1"><a class="header-anchor" href="#运算符" aria-hidden="true">#</a> 运算符</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">5</span>
<span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">&lt;=&gt;</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 最小 /最大</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> LEAST<span class="token punctuation">(</span>first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 范围查询</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token number">6000</span> <span class="token operator">&amp;&amp;</span> salary <span class="token operator">&lt;=</span> <span class="token number">8000</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 模糊查询</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">&#39;%ab%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> first_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">&#39;%a%e%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span>
  <span class="token operator">and</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%e%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- _ 代表一个字符 -- 查询第二个字符是a的last_name</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">&#39;_a%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询第三个字符是c的last_name</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">&#39;__c%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 转义字符,查询第二个字符是_,第三个字符是o</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;_\_o%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- in(set) / not in(set)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="运算符-1" tabindex="-1"><a class="header-anchor" href="#运算符-1" aria-hidden="true">#</a> 运算符</h3><h3 id="运算符练习" tabindex="-1"><a class="header-anchor" href="#运算符练习" aria-hidden="true">#</a> 运算符练习</h3><p>-- 1. 选择工资不在5000到12000的员工的姓名和工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> <span class="token operator">not</span> <span class="token punctuation">(</span>salary <span class="token operator">&gt;</span> <span class="token number">5000</span> <span class="token operator">and</span> salary <span class="token operator">&lt;</span> <span class="token number">12000</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2 查询 20号或者50号部门工作的员工,姓名和部门号</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3 选择公司中没有管理者的员工的姓名和job_id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> job_id<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 选择公司中有奖金的员工姓名,工资和奖金级别</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> commission_pct
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> <span class="token operator">not</span> commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> commission_pct
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 查询员工姓名第三个字母是a的员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;__a%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询员工姓名中有字母a和k的员工的姓名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%a%k%&#39;</span>
   <span class="token operator">or</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%k%a%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span>
  <span class="token operator">and</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%k%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7 查询表employees first_name 以e结尾的员工信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> first_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">&#39;%e&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8 查询表employees 部门编号在80-100之间的姓名和工种</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> department_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> job_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">&gt;=</span> <span class="token number">80</span>
  <span class="token operator">and</span> department_id <span class="token operator">&lt;=</span> <span class="token number">100</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 9. 查询表employees中manger_id是100,101,110的员工的姓名,工资,管理者id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> manager_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> manager_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="运算符练习-1" tabindex="-1"><a class="header-anchor" href="#运算符练习-1" aria-hidden="true">#</a> 运算符练习</h3><h3 id="排序和分页" tabindex="-1"><a class="header-anchor" href="#排序和分页" aria-hidden="true">#</a> 排序和分页</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> employee_id<span class="token punctuation">,</span> department_id <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token comment">--  limit (pageNo-1)*pageSize ,pageSize</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> employee_id<span class="token punctuation">,</span> department_id <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> employee_id <span class="token operator">&gt;</span> <span class="token number">110</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> employee_id <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询第100 ,101条数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">limit</span> <span class="token number">99</span> <span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询工资最高的员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="排序和分页-1" tabindex="-1"><a class="header-anchor" href="#排序和分页-1" aria-hidden="true">#</a> 排序和分页</h3><h3 id="练习-1" tabindex="-1"><a class="header-anchor" href="#练习-1" aria-hidden="true">#</a> 练习</h3><p>-- 1. 查询员工的姓名部门你年薪,按照年薪降序,姓名升序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token keyword">as</span> y_salary<span class="token punctuation">,</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> y_salary <span class="token keyword">desc</span><span class="token punctuation">,</span> last_name <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询工资不在8000 到17000 的员工,按照工资降序,显示21 到40位置的数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> <span class="token operator">not</span> salary <span class="token operator">&gt;</span> <span class="token number">8000</span>
  <span class="token operator">and</span> salary <span class="token operator">&lt;</span> <span class="token number">17000</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span><span class="token punctuation">,</span> last_name <span class="token keyword">asc</span>
<span class="token keyword">limit</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 查询邮箱中包含e的员工,并且按照邮箱的字节数降序,再按照部门号升序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> email<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> email <span class="token operator">like</span> <span class="token string">&#39;%e%&#39;</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> length<span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">,</span> department_id <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习-2" tabindex="-1"><a class="header-anchor" href="#练习-2" aria-hidden="true">#</a> 练习</h3><h3 id="多表查询" tabindex="-1"><a class="header-anchor" href="#多表查询" aria-hidden="true">#</a> 多表查询</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> departments<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> locations<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;Abel&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> departments
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> locations
<span class="token keyword">where</span> location_id <span class="token operator">=</span> <span class="token number">2500</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 联合查询</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> department_name<span class="token punctuation">,</span> departments<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees
         <span class="token keyword">join</span> departments
<span class="token keyword">where</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 表的别名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 练习 -- 1. 查询员工的employee_id,last_name,department_name,city</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> d<span class="token punctuation">,</span>
     locations <span class="token keyword">as</span> l
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
  <span class="token operator">and</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 非等值连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> job_grades<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询员工的工资和对应的等级</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> j<span class="token punctuation">.</span>grade_level
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     job_grades <span class="token keyword">as</span> j
<span class="token keyword">where</span> e<span class="token punctuation">.</span>salary <span class="token operator">between</span> j<span class="token punctuation">.</span>lowest_sal <span class="token operator">and</span> j<span class="token punctuation">.</span>highest_sal
<span class="token keyword">order</span> <span class="token keyword">by</span> grade_level<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 自连接 -- 练习: 查询员工id,员工姓名及管理者的id和姓名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>employee_id <span class="token keyword">as</span> <span class="token string">&#39;员工id&#39;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span>last_name <span class="token keyword">as</span> <span class="token string">&#39;员工姓名&#39;</span><span class="token punctuation">,</span> t2<span class="token punctuation">.</span>employee_id <span class="token keyword">as</span> <span class="token string">&#39;管理者id&#39;</span><span class="token punctuation">,</span> t2<span class="token punctuation">.</span>last_name <span class="token keyword">as</span> <span class="token string">&#39;管理者姓名&#39;</span>
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1<span class="token punctuation">,</span>
     employees <span class="token keyword">as</span> t2
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 内连接和外连接 -- 内连接 相当于交集 -- 外连接相当于并集 -- 外连接分:左外,右外 ,满外</p><p>-- 练习: 查询所有的员工的last_name,department_name信息,</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 99 语法</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 内连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
              <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 左外连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                         <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
                         <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
<span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 右外连接 outer inner 可以省略</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                          <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
              <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
<span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="union-和-union-all-联合查询" tabindex="-1"><a class="header-anchor" href="#union-和-union-all-联合查询" aria-hidden="true">#</a> union 和 union all 联合查询</h3><h3 id="_7中join-实现" tabindex="-1"><a class="header-anchor" href="#_7中join-实现" aria-hidden="true">#</a> 7中join 实现</h3><p>-- 内连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> t2
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 左外连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                   <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 右外连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                    <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 左外连接 去掉交集</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                   <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> t2<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 右外连接 去掉交集</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                    <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 满外连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                   <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                    <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 去除交集对应sql joins 的右下图</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                   <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> t2<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span>
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> t2
                    <span class="token keyword">on</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自然连接" tabindex="-1"><a class="header-anchor" href="#自然连接" aria-hidden="true">#</a> 自然连接</h3><p>-- 原有方式</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
                  <span class="token operator">and</span> e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> d<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 99新特性 自然连接 自动查询两个/多个表中相同的字段</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">natural</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d<span class="token punctuation">;</span>

<span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">natural</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
         <span class="token keyword">natural</span> <span class="token keyword">join</span> locations <span class="token keyword">as</span> l<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习-3" tabindex="-1"><a class="header-anchor" href="#练习-3" aria-hidden="true">#</a> 练习</h3><p>-- 1. 显示&#39;所有&#39;的员工的姓名,部门号和部门名称</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询90号部门员工的job_id 和90号部门的location_id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>location_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">90</span>
  <span class="token operator">and</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 查询&#39;所有&#39;有奖金的员工的last_name,department_name,location_id,city</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">left</span> <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
                   <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
<span class="token keyword">where</span> e<span class="token punctuation">.</span>commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 选择city在Toronto工作的员工的last_name,job_id, department_id,department_name</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span> l<span class="token punctuation">.</span>city
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> d<span class="token punctuation">,</span>
     locations <span class="token keyword">as</span> l
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
  <span class="token operator">and</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
  <span class="token operator">and</span> l<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">&#39;Toronto&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 查询员工所在的部门名称,部门地址,姓名,工作,工资,其中员工所在部门的部门名称为&#39;Executive&#39;</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> l<span class="token punctuation">.</span>street_address
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">left</span> <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
                   <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
<span class="token keyword">where</span> d<span class="token punctuation">.</span>department_name <span class="token operator">=</span> <span class="token string">&#39;Executive&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询指定员工的姓名,员工号,以及他他他的管理者的姓名员工号(需要起别名)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name <span class="token keyword">as</span> <span class="token string">&#39;姓名&#39;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span>employee_id <span class="token keyword">as</span> <span class="token string">&#39;员工号&#39;</span><span class="token punctuation">,</span> t2<span class="token punctuation">.</span>last_name <span class="token keyword">as</span> <span class="token string">&#39;管理者&#39;</span><span class="token punctuation">,</span> t2<span class="token punctuation">.</span>employee_id <span class="token keyword">as</span> <span class="token string">&#39;管理者员工号&#39;</span>
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">left</span> <span class="token keyword">join</span> employees <span class="token keyword">as</span> t2
                   <span class="token keyword">on</span> t1<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 查询哪些部门没有员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> departments <span class="token keyword">as</span> d
         <span class="token keyword">left</span> <span class="token keyword">join</span> employees <span class="token keyword">as</span> e
                   <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8. 查询哪些城市没有部门</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> l<span class="token punctuation">.</span>city<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> locations <span class="token keyword">as</span> l
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> l<span class="token punctuation">.</span>location_id <span class="token operator">=</span> d<span class="token punctuation">.</span>location_id
<span class="token keyword">where</span> d<span class="token punctuation">.</span>department_id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 9. 查询部门名为Sales 或 IT的员工信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     departments <span class="token keyword">as</span> d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
  <span class="token operator">and</span> d<span class="token punctuation">.</span>department_name <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">&#39;Sales&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;IT&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习-4" tabindex="-1"><a class="header-anchor" href="#练习-4" aria-hidden="true">#</a> 练习</h3><h3 id="单行函数" tabindex="-1"><a class="header-anchor" href="#单行函数" aria-hidden="true">#</a> 单行函数</h3><h3 id="字符串函数" tabindex="-1"><a class="header-anchor" href="#字符串函数" aria-hidden="true">#</a> 字符串函数</h3><h3 id="日期函数" tabindex="-1"><a class="header-anchor" href="#日期函数" aria-hidden="true">#</a> 日期函数</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> from_unixtime<span class="token punctuation">(</span>unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="流程控制函数" tabindex="-1"><a class="header-anchor" href="#流程控制函数" aria-hidden="true">#</a> 流程控制函数</h3><p>-- if</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> <span class="token keyword">if</span><span class="token punctuation">(</span>salary <span class="token operator">&gt;</span> <span class="token number">6000</span><span class="token punctuation">,</span> <span class="token string">&#39;高工资&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;低工资&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;工资水平&#39;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>

<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> <span class="token keyword">if</span><span class="token punctuation">(</span>commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;奖金&quot;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> commission_pct<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- ifnull</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> ifnull<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;奖金&quot;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> commission_pct<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- case when then else end</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span>
       salary<span class="token punctuation">,</span>
       <span class="token keyword">case</span>
           <span class="token keyword">when</span> salary <span class="token operator">&gt;</span> <span class="token number">15000</span> <span class="token keyword">then</span> <span class="token string">&#39;白骨精&#39;</span>
           <span class="token keyword">when</span> salary <span class="token operator">&gt;</span> <span class="token number">10000</span> <span class="token keyword">then</span> <span class="token string">&#39;潜力股&#39;</span>
           <span class="token keyword">when</span> salary <span class="token operator">&gt;</span> <span class="token number">20000</span> <span class="token keyword">then</span> <span class="token string">&#39;潜力股&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;前途无限&#39;</span>
           <span class="token keyword">end</span> <span class="token keyword">as</span> <span class="token string">&quot;段位&quot;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="练习-5" tabindex="-1"><a class="header-anchor" href="#练习-5" aria-hidden="true">#</a> 练习</h4><p>1 .查询部门号为10,20,30 的员工信息 , 若部门号为 10 ,咋打印其工资的1.1倍, 20号工资1.2倍,30号 1.3倍,其他部门为1.4倍</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span>
       department_id<span class="token punctuation">,</span>
       salary  <span class="token keyword">as</span> <span class="token string">&#39;基本工资&#39;</span><span class="token punctuation">,</span>
       <span class="token keyword">case</span> department_id
           <span class="token keyword">when</span> <span class="token number">10</span> <span class="token keyword">then</span> salary <span class="token operator">*</span> <span class="token number">1.1</span>
           <span class="token keyword">when</span> <span class="token number">20</span> <span class="token keyword">then</span> salary <span class="token operator">*</span> <span class="token number">1.2</span>
           <span class="token keyword">when</span> <span class="token number">30</span> <span class="token keyword">then</span> salary <span class="token operator">*</span> <span class="token number">1.3</span>
           <span class="token keyword">end</span> <span class="token keyword">as</span> <span class="token string">&#39;加奖金工资&#39;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习-6" tabindex="-1"><a class="header-anchor" href="#练习-6" aria-hidden="true">#</a> 练习</h3><p>-- 1. 显示系统时间(日期+时间)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>-- 2. 查询员工号,姓名,工资, 以及工资提高20%后的结果</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 将员工的姓名,按照首字母排序,并显示姓名的长度</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> length<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;长度&#39;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> last_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 查询员工的id,last_name, salary ,并作为一个列输出,别名为out_put</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;out_put&#39;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5.查询公司员工的工作年数,工作天数,并按照工作年数降序排序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;工作年数&#39;</span><span class="token punctuation">,</span>
       timestampdiff<span class="token punctuation">(</span><span class="token keyword">DAY</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">as</span> <span class="token string">&#39;工作天数&#39;</span><span class="token punctuation">,</span>
       hire_date<span class="token punctuation">,</span>
       <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询员工姓名,hire_date,department_id ,满足以下条件: 雇用时间在1997年之后,department_id 为 80 90或110,commission_pct不为空</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> department_id<span class="token punctuation">,</span> commission_pct
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
  <span class="token operator">and</span> unix_timestamp<span class="token punctuation">(</span>hire_date<span class="token punctuation">)</span> <span class="token operator">&gt;</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">&#39;1997-1-1&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> hire_date<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 查询入职超过10000天的员工的姓名,入职时间</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">DAY</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;入职天数&#39;</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">DAY</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10000</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">DAY</span><span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8. 查询产生一下结果 <code>&lt;last_name&gt; earns &lt;salary&gt; ,&#39;monthly but wants &#39; &lt;salary*3&gt;</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> <span class="token string">&#39;earns&#39;</span><span class="token punctuation">,</span> <span class="token keyword">truncate</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;monthly but wants &#39;</span><span class="token punctuation">,</span>
                 <span class="token keyword">truncate</span><span class="token punctuation">(</span>salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;dream salary&#39;</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 9. 使用case-when ,按照下面条件查询 -- job grade -- AD_PRES A -- ST_MAN B -- IT_PROG C -- SA_REP D -- ST_CLERK E</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> job_id<span class="token punctuation">,</span>
       <span class="token keyword">case</span> job_id
           <span class="token keyword">when</span> <span class="token string">&#39;AD_PRES &#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;A&#39;</span>
           <span class="token keyword">when</span> <span class="token string">&#39;ST_MAN &#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;B&#39;</span>
           <span class="token keyword">when</span> <span class="token string">&#39;IT_PROG &#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;C&#39;</span>
           <span class="token keyword">when</span> <span class="token string">&#39;SA_REP &#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;D&#39;</span>
           <span class="token keyword">when</span> <span class="token string">&#39;ST_CLERK &#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;E&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;F&#39;</span>
           <span class="token keyword">end</span> <span class="token keyword">as</span> grade
<span class="token keyword">from</span> employees
<span class="token keyword">order</span> <span class="token keyword">by</span> grade <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="单行函数-1" tabindex="-1"><a class="header-anchor" href="#单行函数-1" aria-hidden="true">#</a> 单行函数</h3><h3 id="聚合函数" tabindex="-1"><a class="header-anchor" href="#聚合函数" aria-hidden="true">#</a> ---- 聚合函数 -----</h3><p>-- 平均值 ,总数</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- count 计算指定字段在查询结果中出现的个数</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>job_id<span class="token punctuation">)</span><span class="token punctuation">,</span> job_id
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> job_id<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 计算平均奖金率</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span>ifnull<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;平均奖金率&#39;</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="group-by" tabindex="-1"><a class="header-anchor" href="#group-by" aria-hidden="true">#</a> group by</h3><p>-- 查询各个部门的平均工资,最高工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                    <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询各个department_id,job_id的平均工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> department_id<span class="token punctuation">,</span> job_id
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">,</span> job_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- with rollup</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">)</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">with rollup</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- having 用来过滤数据 ,如果过滤条件中使用了聚合函数,则必须使用having来替代where -- 查询各个部门中最高工资比10000高的部门信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">group</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 练习: 查询部门id为10,20,30 40这四个部门中最高工资比10000高的部门信息 -- 第一种方式 ,推荐使用</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token operator">and</span> d<span class="token punctuation">.</span>department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 第二种方式</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">group</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10000</span>
   <span class="token operator">and</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="练习-7" tabindex="-1"><a class="header-anchor" href="#练习-7" aria-hidden="true">#</a> 练习</h4><p>-- 1. where子句是否可以使用组函数进行过滤 ?</p><blockquote><p>不可以,需要使用having</p></blockquote><p>-- 2. 查询公司员工工资的最大值,最小值,平均值,求和</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 查询各job_id的员工的工资的最大值,最小值,平均值,总和</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> job_id<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> job_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 选择具有各个job_id的员工的工人数</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> job_id<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> job_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 查询员工最高工资和最低工资的的差距(difference)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;difference&#39;</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询各个管理者手下员工的最低工资,其中最低工资不能低于6000,没有管理者的员工不计算在内</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> manager_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token number">6000</span>
  <span class="token operator">and</span> manager_id <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> manager_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 查询所有部门的名字,location_id,员工数量和平均工资,按照平均工资降序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>employee_id<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                    <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">group</span> <span class="token keyword">by</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">avg</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8. 查询每个工种,每个部门的的部门名,工种名和最低工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> j<span class="token punctuation">.</span>job_title
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">right</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                    <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">join</span> jobs <span class="token keyword">as</span> j
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id
<span class="token keyword">group</span> <span class="token keyword">by</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> j<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="聚合函数-1" tabindex="-1"><a class="header-anchor" href="#聚合函数-1" aria-hidden="true">#</a> ---- 聚合函数 -----</h3><h3 id="子查询" tabindex="-1"><a class="header-anchor" href="#子查询" aria-hidden="true">#</a> ---- 子查询 -----</h3><p>-- 练习 -- 1. 谁比Abel工资高 -- 方式 1,使用子查询</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;Abel&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 方式2 ,使用自连接</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>salary
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
         <span class="token keyword">join</span> employees <span class="token keyword">as</span> t2
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>salary <span class="token operator">&gt;=</span> t2<span class="token punctuation">.</span>salary
  <span class="token operator">and</span> t2<span class="token punctuation">.</span>last_name <span class="token operator">=</span> <span class="token string">&#39;Abel&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询大于公司平均工资的员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> salary<span class="token punctuation">,</span> last_name
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                <span class="token keyword">from</span> employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询大于部门平均工资的员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> salary<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees <span class="token keyword">as</span> t1
<span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> department_id <span class="token operator">=</span> t1<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 查询工资大于149号员工工资的员工信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">149</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 查询job_id与141号员工相同,salary 比143号员工多的员工信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> job_id <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">141</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">143</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 查询与141号或174号员工的manager_id和department_id相同的,其他员工的</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>employee_id<span class="token punctuation">,</span>manager_id<span class="token punctuation">,</span>department_id
<span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> manager_id<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> <span class="token punctuation">(</span>manager_id<span class="token punctuation">,</span> department_id<span class="token punctuation">)</span>
    <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> manager_id<span class="token punctuation">,</span> department_id <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> employee_id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> manager_id<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> manager_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> manager_id <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                        <span class="token keyword">from</span> employees
                        <span class="token keyword">where</span> employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">141</span><span class="token punctuation">,</span>
                                              <span class="token number">174</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> employee_id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询最低工资大于50号部门最低工资的部门id和最低工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 查询员工的employee_id,last_name和location, -- 若员工的department_id 和 location_id为1800department_id相同 -- 则country为&#39;Canada&#39;,其余则为&#39;USA&#39;</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span>
       last_name<span class="token punctuation">,</span>
       l<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span>
       e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
       l<span class="token punctuation">.</span>street_address<span class="token punctuation">,</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                              <span class="token keyword">from</span> employees
                              <span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                                                     <span class="token keyword">from</span> departments
                                                     <span class="token keyword">where</span> location_id <span class="token operator">=</span> <span class="token number">1800</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;Canada&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;USA&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> country
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
         <span class="token keyword">left</span> <span class="token keyword">join</span> locations <span class="token keyword">as</span> l
                   <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多行子查询" tabindex="-1"><a class="header-anchor" href="#多行子查询" aria-hidden="true">#</a> 多行子查询</h3><p>-- in -- 1. 查询工资是各部门最低工资的员工</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                 <span class="token keyword">from</span> employees
                 <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- any /some -- all -- 1. 返回其他job_id中比job_id为&#39;IT_PROG&#39;部门任一工资低的员工信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&lt;</span> <span class="token keyword">some</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> job_id <span class="token operator">!=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">;</span> <span class="token comment">-- 76 rows</span>

<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">&lt;</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> job_id <span class="token operator">!=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">;</span> <span class="token comment">-- 1 rows</span>

<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">)</span>
  <span class="token operator">and</span> job_id <span class="token operator">!=</span> <span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询平均工资最低的部门id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方法1</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 方法2</span>
<span class="token keyword">select</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>avg_salary<span class="token punctuation">)</span>
                      <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_salary
                            <span class="token keyword">from</span> employees
                            <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t_dep_avg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方法3</span>
<span class="token keyword">select</span> department_id
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_salary
                           <span class="token keyword">from</span> employees
                           <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="相关子查询" tabindex="-1"><a class="header-anchor" href="#相关子查询" aria-hidden="true">#</a> 相关子查询</h3><p>-- 1. 查询员工中工资大于本部门平均工资的员工的信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式1</span>
<span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> t1
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span>
      <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
       <span class="token keyword">from</span> employees <span class="token keyword">as</span> t2
       <span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式2,在from 中使用子查询</span>
<span class="token keyword">select</span> t1<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> t1<span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> dept_avg_salary <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t2
<span class="token keyword">where</span> t1<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>department_id
  <span class="token operator">and</span> t1<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> t2<span class="token punctuation">.</span>dept_avg_salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询员工的id,salary 按照department_name排序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式一</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
         <span class="token keyword">left</span> <span class="token keyword">join</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> d
                   <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">order</span> <span class="token keyword">by</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">;</span>
<span class="token comment">-- 方式2</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
       e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token keyword">select</span> d<span class="token punctuation">.</span>department_name
        <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> d
        <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span> <span class="token keyword">as</span> department_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span><span class="token keyword">select</span> d<span class="token punctuation">.</span>department_name <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> d <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 若employees表中的employee_id 与 job_history表中的employee_id相同的数目不小于2, -- 输出这些相同id的员工的employee_id,last_name和其job_id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
<span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>job_history <span class="token keyword">as</span> j <span class="token keyword">where</span> j<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 查询公司管理者的employee_id,last_name,job_id,department_id 信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式1 自连接</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
<span class="token keyword">where</span> e<span class="token punctuation">.</span>employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> manager_id <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 方式2 子查询</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> m<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> m<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> m<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> m<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> m
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
<span class="token comment">-- 方式3 使用exists</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
<span class="token keyword">where</span> <span class="token keyword">exists</span><span class="token punctuation">(</span>
              <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> m <span class="token keyword">where</span> e<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> m<span class="token punctuation">.</span>manager_id
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5.查询departments表中,不存在于employees表中的 department_id,department_name</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方法1</span>
<span class="token keyword">select</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> d
         <span class="token keyword">left</span> <span class="token keyword">join</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
                   <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 方法2</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> e
<span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> d <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习-8" tabindex="-1"><a class="header-anchor" href="#练习-8" aria-hidden="true">#</a> 练习</h3><p>-- 1. 查询和Zlotkey 相同部门的员工姓名和工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                       <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                       <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;Zlotkey&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 2. 查询工资比公司平均工资高的员工的员工号,姓名,和工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> t<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> t<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> t<span class="token punctuation">.</span>salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> t
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3. 查询工资大于所有job_id =&#39;SA_MAN&#39;的员工的工资定的员工的last_name,job_id, salary</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary
                      <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                      <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;SA_MAN&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t<span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>


<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary
                    <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                    <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;SA_MAN&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> last_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                        <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                        <span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">&#39;%u%&#39;</span>
                           <span class="token operator">or</span> <span class="token string">&#39;%U%&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 查询在部门的location_id为1700的部门工作的员工和员工号</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                        <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
                        <span class="token keyword">where</span> location_id <span class="token operator">=</span> <span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 查询管理者是King的员工的姓名和工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> manager_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> manager_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> employee_id <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;King&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 查询公司最低的员工信息,last_name ,salary</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> salary <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                <span class="token keyword">from</span> employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8. 查询平均工资最低的部门信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                       <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                       <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                       <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>avg_salary<span class="token punctuation">)</span>
                                             <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_salary<span class="token punctuation">,</span> department_id <span class="token keyword">as</span> dpt_id
                                                   <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                                   <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 方法2 &lt;= all</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                       <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                       <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                       <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                                                  <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                                  <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方法3 使用limit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 9. 查询平均工资最低的部门信息,和该部门的平均工资(相关子查询)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">where</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                       <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                       <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                       <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>avg_salary<span class="token punctuation">)</span>
                                             <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_salary<span class="token punctuation">,</span> department_id <span class="token keyword">as</span> dpt_id
                                                   <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                                   <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 10. 查询平均工资最高的job 信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>jobs
<span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> job_id
                <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                <span class="token keyword">group</span> <span class="token keyword">by</span> job_id
                <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>avg_salary<span class="token punctuation">)</span>
                                      <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_salary
                                            <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                            <span class="token keyword">group</span> <span class="token keyword">by</span> job_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 11. 查询平均工资高于公司平均工资的部门</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> department_id <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                      <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 12. 查询公司中所有manager的详细信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式1</span>
<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> manager_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> manager_id
                      <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 方式2 自连接</span>
<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> manager_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> employee_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> manager_id
                      <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 方式3 使用exists</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 13. 各个部门中 最高工资最低的那个部门的最低工资是多少</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方法1</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>max_salry<span class="token punctuation">)</span>
                      <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> max_salry
                            <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                            <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                            <span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 方式2</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                           <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                           <span class="token keyword">group</span> <span class="token keyword">by</span> department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 方法3</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token keyword">having</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                        <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                        <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                        <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">asc</span>
                        <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式4</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e<span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
      <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
      <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
      <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">asc</span>
      <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> t<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 14.查询平均工资最高的部门的manager 的详细信息,last_name,department_id ,email , salary</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_id<span class="token punctuation">,</span> email<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> manager_id
                     <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                     <span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                                            <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                            <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                                            <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
                                                                  <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                                                                  <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                                                                  <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">desc</span>
                                                                  <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                       <span class="token operator">and</span> manager_id <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 15. 查询部门的部门号,其中不包括job_id是&#39;ST_CLERK&#39;的部门号</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> department_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
<span class="token keyword">where</span> department_id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> department_id
                            <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                            <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token string">&#39;ST_CLERK&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 16. 查询所有没有管理者的的员工的last_name</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> last_name
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> manager_id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 17.查询员工号,姓名,雇佣时间,工资,其中员工的管理者为&#39;De Haan&#39;</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> manager_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> employee_id
                    <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                    <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;De Haan&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 18.查询各个部门中工资比本部门平均工资高的员工的员工号,姓名和工资(相关子查询)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span>
      <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id <span class="token keyword">having</span> department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 19. 查询每个部门下的部门人数大于 5的部门名称(相关子查询)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments
<span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> department_id
                        <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
                        <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
                        <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式2</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments <span class="token keyword">as</span> d
<span class="token keyword">where</span> <span class="token number">5</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 20. 查询每个国家下的部门个数大于 2 的国家编号(相关子查询)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> country_id
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>locations <span class="token keyword">as</span> l
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> l<span class="token punctuation">.</span>location_id <span class="token operator">=</span> d<span class="token punctuation">.</span>location_id
         <span class="token keyword">join</span> atguigudb<span class="token punctuation">.</span>employees <span class="token keyword">as</span> e
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">group</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="子查询-1" tabindex="-1"><a class="header-anchor" href="#子查询-1" aria-hidden="true">#</a> ---- 子查询 -----</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> my_atguigudb<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="添加一个字段" tabindex="-1"><a class="header-anchor" href="#添加一个字段" aria-hidden="true">#</a> 添加一个字段</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> empl
    <span class="token keyword">add</span> employee_id <span class="token keyword">int</span><span class="token punctuation">;</span>
<span class="token comment">-- 指定添加的位置 first after</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> empl
    <span class="token keyword">add</span> phone_number <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">after</span> salary<span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> empl
    <span class="token keyword">add</span> last_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">first</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> empl<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="修改表-修改字段的数据类型-和长度" tabindex="-1"><a class="header-anchor" href="#修改表-修改字段的数据类型-和长度" aria-hidden="true">#</a> 修改表,修改字段的数据类型,和长度</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> empl
    <span class="token keyword">modify</span> employee_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> empl<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="重命名表字段" tabindex="-1"><a class="header-anchor" href="#重命名表字段" aria-hidden="true">#</a> 重命名表字段</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> empl
    change e_mail email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> empl<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="删除表字段" tabindex="-1"><a class="header-anchor" href="#删除表字段" aria-hidden="true">#</a> 删除表字段</h1><p>alter table empl add id varchar(25); alter table empl drop column id;</p><h4 id="重命名表" tabindex="-1"><a class="header-anchor" href="#重命名表" aria-hidden="true">#</a> 重命名表</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式1</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> employees1 <span class="token keyword">to</span> employees_1<span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees_1<span class="token punctuation">;</span>
<span class="token comment">-- 方式2</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employees_1 <span class="token keyword">rename</span> <span class="token keyword">to</span> employees1<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> employees1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>清空表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> employees1<span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> employees1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="dcl-中commit-和rollback" tabindex="-1"><a class="header-anchor" href="#dcl-中commit-和rollback" aria-hidden="true">#</a> DCL 中commit 和rollback</h4><blockquote><p>commit:提交数据,一旦执行,则数据被永久保存在数据库中,意味着不可回滚</p><p>rollback :回滚数据,一旦执行rollback ,则可实现数据的回滚,回滚到最近一次commit之后</p><p>truncate table 和 delete from;</p><p>-- truncate table,一旦执行,数据全部清除,同时数据是不可以回滚的 -- delete from 清除数据,但是数据可以实现回滚</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除表-并从另一个表中复制数据" tabindex="-1"><a class="header-anchor" href="#删除表-并从另一个表中复制数据" aria-hidden="true">#</a> 删除表,并从另一个表中复制数据</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> employees<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> employees <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 提交和回滚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>课后练习</p><p>-- 1. 创建数据库test01_office ,指明字符集为utf8,并在此数据库下执行一下操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test01_office <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 创建表dept01</p><table><thead><tr><th>字段</th><th>类型</th></tr></thead><tbody><tr><td>id</td><td>int(7)</td></tr><tr><td>name</td><td>varchar(25)</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> test01_office<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> dept01
<span class="token punctuation">(</span>
    id   <span class="token keyword">tinyint</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> dept01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 3.将表departments终端数据插入新表dept02中</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> dept02 <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> dept02<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 4. 创建表emp01</p><table><thead><tr><th>字段</th><th>类型</th></tr></thead><tbody><tr><td>id</td><td>int(7)</td></tr><tr><td>first_name</td><td>varchar(25)</td></tr><tr><td>last_name</td><td>varchar(25)</td></tr><tr><td>dept_id</td><td>int(7)</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> emp01
<span class="token punctuation">(</span>
    id         <span class="token keyword">tinyint</span><span class="token punctuation">,</span>
    first_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    last_name  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    dept_id    <span class="token keyword">tinyint</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 5. 将last_name的长度增加到50</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp01
    <span class="token keyword">modify</span> last_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 6. 根据表employees创建emp02</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> emp02 <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees
<span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp02<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 7. 删除表emp01</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> emp01<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 8. 将表emp02重命名为emp01</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">rename</span> <span class="token keyword">table</span> emp02 <span class="token keyword">to</span> emp01<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 9. 在表dept02和emp01中添加新列test_column ,并检查所有的操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> dept02
    <span class="token keyword">add</span> <span class="token keyword">column</span> test_column <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> dept02<span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp01
    <span class="token keyword">add</span> <span class="token keyword">column</span> test_column <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 10. 删除表emp01中的列department_id</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp01
    <span class="token keyword">drop</span> <span class="token keyword">column</span> department_id<span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 11. 创建数据库test02_market</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test02_market<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> test02_market<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 12. 创建数据表customers</p><table><thead><tr><th>字段名</th><th>类型</th></tr></thead><tbody><tr><td>c_num</td><td>int</td></tr><tr><td>c_name</td><td>varchar(50)</td></tr><tr><td>c_concat</td><td>varchar(50)</td></tr><tr><td>c_city</td><td>varchar(50)</td></tr><tr><td>c_birth</td><td>date</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> customers
<span class="token punctuation">(</span>
    c_num    <span class="token keyword">int</span><span class="token punctuation">,</span>
    c_name   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    c_concat <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    c_city   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    c_birth  <span class="token keyword">date</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 13. 将c_contact字段移动到c_birth字段后面</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> customers
    <span class="token keyword">modify</span> c_concat <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">after</span> c_birth<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 14. 将c_name字段数据类型改为varchar(70)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> customers
    <span class="token keyword">modify</span> c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 15. 将c_concat字段改名为c_phone</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> customers <span class="token keyword">rename</span> <span class="token keyword">column</span> c_concat <span class="token keyword">to</span> c_phone<span class="token punctuation">;</span>
<span class="token keyword">desc</span> customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 16. 增加c_gender字段到c_name后面,数据类型为char(1)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> customers
    <span class="token keyword">add</span> c_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">after</span> c_name<span class="token punctuation">;</span>
<span class="token keyword">desc</span> customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 17. 将表名改为customers_info</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">rename</span> <span class="token keyword">table</span> customers <span class="token keyword">to</span> customers_info<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 18. 删除字段_city</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> customers
    <span class="token keyword">drop</span> <span class="token keyword">column</span> c_city<span class="token punctuation">;</span>
<span class="token keyword">desc</span> customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据的处理-增删改" tabindex="-1"><a class="header-anchor" href="#数据的处理-增删改" aria-hidden="true">#</a> 数据的处理-增删改</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> atguigudb<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp
<span class="token punctuation">(</span>
    id        <span class="token keyword">int</span><span class="token punctuation">,</span>
    name      <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    hire_date <span class="token keyword">date</span><span class="token punctuation">,</span>
    salary    <span class="token keyword">decimal</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加数据" tabindex="-1"><a class="header-anchor" href="#添加数据" aria-hidden="true">#</a> 添加数据</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 方式1,按照表字段顺序添加</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2021-11-11&#39;</span><span class="token punctuation">,</span> <span class="token number">3400.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 方式2,没有赋值的字段值为null</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Jerry&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1992-09-12&#39;</span><span class="token punctuation">,</span> <span class="token number">9999.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 方式3,同时插入多条</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;俊杰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1992-09-12&#39;</span><span class="token punctuation">,</span> <span class="token number">9999.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;德华&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1992-09-12&#39;</span><span class="token punctuation">,</span> <span class="token number">9999.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 方式4,从其他表查询插入</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除数据-某一行-或者多行" tabindex="-1"><a class="header-anchor" href="#删除数据-某一行-或者多行" aria-hidden="true">#</a> 删除数据,某一行,或者多行</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delete</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="更新数据-更新数据" tabindex="-1"><a class="header-anchor" href="#更新数据-更新数据" aria-hidden="true">#</a> 更新数据/更新数据</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> emp
<span class="token keyword">set</span> hire_date <span class="token operator">=</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 同时修改一行数据的多个字段</span>
<span class="token keyword">update</span> emp
<span class="token keyword">set</span> id   <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
    name <span class="token operator">=</span><span class="token string">&#39;王&#39;</span>
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="计算列" tabindex="-1"><a class="header-anchor" href="#计算列" aria-hidden="true">#</a> 计算列</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> test
<span class="token punctuation">(</span>
    a <span class="token keyword">int</span><span class="token punctuation">,</span>
    b <span class="token keyword">int</span><span class="token punctuation">,</span>
    c <span class="token keyword">int</span> generated always <span class="token keyword">as</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span> virtual <span class="token comment"># c为计算列</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> test<span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> test<span class="token punctuation">;</span>
<span class="token keyword">update</span> test
<span class="token keyword">set</span> b <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> test<span class="token punctuation">;</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> test<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ddl-dml综合练习" tabindex="-1"><a class="header-anchor" href="#ddl-dml综合练习" aria-hidden="true">#</a> DDL DML综合练习</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1.创建数据库library</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> my_atguigudb<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> library <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.创建表books,表结构如下</span>
<span class="token keyword">use</span> library<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> books
<span class="token punctuation">(</span>
    id       <span class="token keyword">int</span><span class="token punctuation">,</span>
    name     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    authors  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price    <span class="token keyword">float</span><span class="token punctuation">,</span>
    pub_date <span class="token keyword">year</span><span class="token punctuation">,</span>
    note     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    num      <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> books<span class="token punctuation">;</span>
<span class="token comment">-- 3.插入数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> books <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> authors<span class="token punctuation">,</span> price<span class="token punctuation">,</span> pub_date<span class="token punctuation">,</span> note<span class="token punctuation">,</span> num<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Tal of AAA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Dickes&#39;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">1995</span><span class="token punctuation">,</span> <span class="token string">&#39;novel&#39;</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;EmmaT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Jane lura&#39;</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">1993</span><span class="token punctuation">,</span> <span class="token string">&#39;joke&#39;</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Story of Jane&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Jane Tim&#39;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token string">&#39;novel&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Lovey day&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Grorge Byron&#39;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">2005</span><span class="token punctuation">,</span> <span class="token string">&#39;novel&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Old land&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Honere Blade&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">2010</span><span class="token punctuation">,</span> <span class="token string">&#39;law&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;The Battle&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Upton Sara&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">,</span> <span class="token string">&#39;medicine&#39;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;Rose Hood&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Richard haggard&#39;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">2008</span><span class="token punctuation">,</span> <span class="token string">&#39;cartoon&#39;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books<span class="token punctuation">;</span>

<span class="token comment">-- 4.将小说类型(novel) 的书的价格都增加5</span>
<span class="token keyword">update</span> books
<span class="token keyword">set</span> price <span class="token operator">=</span>price <span class="token operator">+</span> <span class="token number">5</span>
<span class="token keyword">where</span> note <span class="token operator">=</span> <span class="token string">&#39;novel&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books<span class="token punctuation">;</span>

<span class="token comment">-- 5.将名称为EmmaT的书的价格改为40,并将说明改为drama</span>
<span class="token keyword">update</span> books
<span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">40</span>
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;EmmaT&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;EmmaT&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- 6.删除库存为0的记录</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books<span class="token punctuation">;</span>

<span class="token comment">-- 7.统计书名中包含字母a字母的书</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 8.统计书名中包含字母a的书的数量和库存总量</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;库存总量&#39;</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 9.找出&#39;novel&#39;类型的书,按照价格降序排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> note <span class="token operator">=</span> <span class="token string">&#39;novel&#39;</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> price <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token comment">-- 10.查询图书信息,按照库存量降序排序,如果库存量相同按照note升序排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">order</span> <span class="token keyword">by</span> num <span class="token keyword">desc</span><span class="token punctuation">,</span> note <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token comment">-- 11.按照note分类统计书的数量</span>
<span class="token keyword">select</span> note<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note<span class="token punctuation">;</span>
<span class="token comment">-- 12.按照note分类统计书的库存量,显示库存超过30本的</span>
<span class="token keyword">select</span> note<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note
<span class="token keyword">having</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token comment">-- 13.查询所有图书,每页显示5本,显示第二页</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">-- 14.按照note分类统计书的库存量,显示库存量最多的</span>
<span class="token keyword">select</span> note<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note
<span class="token keyword">having</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
                        <span class="token keyword">from</span> books
                        <span class="token keyword">group</span> <span class="token keyword">by</span> note<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> note<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 15.查询书名达到10个字符的书,不包括里面的空格</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">where</span> char_length<span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">-- 16.查询书名和类型,其中note值为novel显示小说,law显示法律,medicine显示医药,</span>
<span class="token comment">-- cartoon显示卡通,joke显示笑话</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>
       note<span class="token punctuation">,</span>
       <span class="token keyword">case</span>
           <span class="token keyword">when</span> note <span class="token operator">=</span> <span class="token string">&#39;novel&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;小说&#39;</span>
           <span class="token keyword">when</span> note <span class="token operator">=</span> <span class="token string">&#39;law&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;法律&#39;</span>
           <span class="token keyword">when</span> note <span class="token operator">=</span> <span class="token string">&#39;medicine&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;医药&#39;</span>
           <span class="token keyword">when</span> note <span class="token operator">=</span> <span class="token string">&#39;cartoon&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;卡通&#39;</span>
           <span class="token keyword">when</span> note <span class="token operator">=</span> <span class="token string">&#39;joke&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;笑话&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;其他&#39;</span>
           <span class="token keyword">end</span>
<span class="token keyword">from</span> books<span class="token punctuation">;</span>
<span class="token comment">-- 17.查询书名,库存,其中num值超过30本的,显示滞销,大于0,并低于10的显示畅销,为0的显示无库存</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>
       num<span class="token punctuation">,</span>
       <span class="token keyword">case</span> num
           <span class="token keyword">when</span> num <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token keyword">then</span> <span class="token string">&#39;滞销&#39;</span>
           <span class="token keyword">when</span> num <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">and</span> num <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token keyword">then</span> <span class="token string">&#39;畅销&#39;</span>
           <span class="token keyword">when</span> num <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token string">&#39;无库存&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;其他&#39;</span>
           <span class="token keyword">end</span> <span class="token keyword">as</span> <span class="token string">&#39;状态&#39;</span>
<span class="token keyword">from</span> books<span class="token punctuation">;</span>
<span class="token comment">-- 18.统计每一种note的库存量,并合计总量</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span>note<span class="token punctuation">,</span> <span class="token string">&#39;总库存&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note
<span class="token keyword">with rollup</span><span class="token punctuation">;</span>
<span class="token comment">-- 19. 统计每一种note的数量,并合计总量</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span>note<span class="token punctuation">,</span> <span class="token string">&#39;总量&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;数量&#39;</span>
<span class="token keyword">from</span> books
<span class="token keyword">group</span> <span class="token keyword">by</span> note
<span class="token keyword">with rollup</span><span class="token punctuation">;</span>

<span class="token comment">-- 20.统计库存量前三名的图书</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">order</span> <span class="token keyword">by</span> num <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">-- 21,找出最早出版的一本书</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">year</span><span class="token punctuation">(</span>pub_date<span class="token punctuation">)</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 22.找出novel中价格最高的一本书</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">order</span> <span class="token keyword">by</span> price <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 23.找出书名中字数最多的一本书,不含空格</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> books
<span class="token keyword">order</span> <span class="token keyword">by</span> char_length<span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据处理之增删改" tabindex="-1"><a class="header-anchor" href="#数据处理之增删改" aria-hidden="true">#</a> 数据处理之增删改</h2><p>select database(); show tables;</p><h3 id="练习-9" tabindex="-1"><a class="header-anchor" href="#练习-9" aria-hidden="true">#</a> 练习</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1.创建数据库dbtest11</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> db_test_11 <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.运行以下脚本创建表my_employees;</span>
<span class="token keyword">use</span> db_test_11<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> my_employees
<span class="token punctuation">(</span>
    id         <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    first_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    last_name  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    user_id    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    salary     <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> my_employees<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> users
<span class="token punctuation">(</span>
    id            <span class="token keyword">int</span><span class="token punctuation">,</span>
    user_id       <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    department_id <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> users<span class="token punctuation">;</span>

<span class="token comment">-- 3.显示表my_employees的结构</span>
<span class="token keyword">desc</span> my_employees<span class="token punctuation">;</span>
<span class="token comment">-- 4.向my_employees表中插入下列数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_employees<span class="token punctuation">(</span>id<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> user_id<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;patel&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ralph&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Rpatel&#39;</span><span class="token punctuation">,</span> <span class="token number">896</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Dancs&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Betty&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Bdancs&#39;</span><span class="token punctuation">,</span> <span class="token number">860</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Biri&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ben&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Bbiri&#39;</span><span class="token punctuation">,</span> <span class="token number">1100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Newman&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Chad&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Cnewman&#39;</span><span class="token punctuation">,</span> <span class="token number">750</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Kopeburn&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Audrey&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Aropebur&#39;</span><span class="token punctuation">,</span> <span class="token number">1550</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token comment">-- 5.向users表中插入数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> users <span class="token punctuation">(</span>id<span class="token punctuation">,</span> user_id<span class="token punctuation">,</span> department_id<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Rpatel&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Bdancs&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Bbiri&#39;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Cnewman&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Aropebur&#39;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token comment">-- 6.将3号员工的last_name修改为&#39;drelxer&#39;</span>
<span class="token keyword">update</span> my_employees
<span class="token keyword">set</span> last_name <span class="token operator">=</span><span class="token string">&#39;drelxer&#39;</span>
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token comment">--  7. 将所有工资少于900的员工的工资修改为1000</span>
<span class="token keyword">update</span> my_employees
<span class="token keyword">set</span> salary <span class="token operator">=</span><span class="token number">1000</span>
<span class="token keyword">where</span> salary <span class="token operator">&lt;</span> <span class="token number">900</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token comment">-- 8.将user_id为Bbiri的user表和my_employees表的记录全部删除</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> users
<span class="token keyword">where</span> user_id <span class="token operator">=</span> <span class="token string">&#39;Bbiri&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> my_employees
<span class="token keyword">where</span> user_id <span class="token operator">=</span> <span class="token string">&#39;Bbiri&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式二</span>
<span class="token keyword">delete</span> m<span class="token punctuation">,</span>u
<span class="token keyword">from</span> my_employees m
         <span class="token keyword">join</span> users u
              <span class="token keyword">on</span> m<span class="token punctuation">.</span>user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>user_id
<span class="token keyword">where</span> m<span class="token punctuation">.</span>user_id <span class="token operator">=</span> <span class="token string">&#39;Bbiri&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token comment">-- 9.删除my_employees,users表中所有的数据</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>
<span class="token comment">-- 10.检查所做的修正</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>
<span class="token comment">-- 11.清空表my_employees</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> my_employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习2" tabindex="-1"><a class="header-anchor" href="#练习2" aria-hidden="true">#</a> 练习2</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1.使用现有数据库</span>
<span class="token keyword">use</span> db_test_11<span class="token punctuation">;</span>
<span class="token comment">-- 2.创建表pet</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> pet
<span class="token punctuation">(</span>
    name    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;宠物名称&#39;</span><span class="token punctuation">,</span>
    owner   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;宠物主人&#39;</span><span class="token punctuation">,</span>
    species <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;种类&#39;</span><span class="token punctuation">,</span>
    sex     <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;性别&#39;</span><span class="token punctuation">,</span>
    birth   <span class="token keyword">Year</span> <span class="token keyword">comment</span> <span class="token string">&#39;出生日期&#39;</span><span class="token punctuation">,</span>
    death   <span class="token keyword">YEAR</span> <span class="token keyword">comment</span> <span class="token string">&#39;死亡日期&#39;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> pet<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">full</span> <span class="token keyword">columns</span> <span class="token keyword">from</span> pet<span class="token punctuation">;</span>
<span class="token comment">-- 3.添加记录</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> pet <span class="token punctuation">(</span>name<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> species<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> death<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;Fluffy&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;harold&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Cat&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2003&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2010&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;Claws&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;gwen&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Cat&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2004&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;Buffy&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">&#39;Dog&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2009&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;Fang&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;benny&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Dog&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2000&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;bowser&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;diane&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Dog&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2003&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2009&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;Chirpy&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">&#39;Bird&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2008&#39;</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet<span class="token punctuation">;</span>
<span class="token comment">-- 4.添加字段:主人的生日owner_birth DATE类型</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> pet
    <span class="token keyword">add</span> owner_birth <span class="token keyword">date</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> pet<span class="token punctuation">;</span>
<span class="token comment">-- 5.将名称为Claws的猫的主人改为kevin</span>
<span class="token keyword">update</span> pet
<span class="token keyword">set</span> owner <span class="token operator">=</span> <span class="token string">&#39;kevin&#39;</span>
<span class="token keyword">where</span> species <span class="token operator">=</span> <span class="token string">&#39;Cat&#39;</span>
  <span class="token operator">and</span> name <span class="token operator">=</span> <span class="token string">&#39;Claws&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet<span class="token punctuation">;</span>

<span class="token comment">-- 6.将没有死的狗的主人改为duck</span>
<span class="token keyword">update</span> pet
<span class="token keyword">set</span> owner <span class="token operator">=</span> <span class="token string">&#39;duck&#39;</span>
<span class="token keyword">where</span> death <span class="token operator">is</span> <span class="token boolean">null</span>
  <span class="token operator">and</span> species <span class="token operator">=</span> <span class="token string">&#39;Dog&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet<span class="token punctuation">;</span>

<span class="token comment">-- 7.查询没有主人的宠物的名字</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet
<span class="token keyword">where</span> owner <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 8.查询已经死了的cat的姓名,主人,以及去世时间</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet
<span class="token keyword">where</span> species <span class="token operator">=</span> <span class="token string">&#39;Cat&#39;</span>
  <span class="token operator">and</span> death <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 9.查询已经死亡的狗</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet
<span class="token keyword">where</span> species <span class="token operator">=</span> <span class="token string">&#39;Dog&#39;</span>
  <span class="token operator">and</span> death <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 10.查询所有的宠物信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pet<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习3" tabindex="-1"><a class="header-anchor" href="#练习3" aria-hidden="true">#</a> 练习3</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1.使用数据库db_test_11</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> db_test_11<span class="token punctuation">;</span>
<span class="token comment">-- 2.创建表employees,并添加记录</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> employees
<span class="token punctuation">(</span>
    id     <span class="token keyword">int</span><span class="token punctuation">,</span>
    name   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sex    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    tel    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    addr   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    salary <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> db_test_11<span class="token punctuation">.</span>employees<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> tel<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span> <span class="token string">&#39;张一一&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1357777345&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;山东青岛&#39;</span><span class="token punctuation">,</span> <span class="token number">1001.58</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">10002</span><span class="token punctuation">,</span> <span class="token string">&#39;刘小红&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;女&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13477879867&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;河北保定&#39;</span><span class="token punctuation">,</span> <span class="token number">1201.21</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">10003</span><span class="token punctuation">,</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;0751-1234567&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;广东佛山&#39;</span><span class="token punctuation">,</span> <span class="token number">1004.11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">10004</span><span class="token punctuation">,</span> <span class="token string">&#39;刘小强&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;0755-5555555&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;广东深圳&#39;</span><span class="token punctuation">,</span> <span class="token number">1501.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">10005</span><span class="token punctuation">,</span> <span class="token string">&#39;王艳&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;女&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;020-1232133&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;广东广州&#39;</span><span class="token punctuation">,</span> <span class="token number">1405.16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token comment">-- 3. 查询出薪资在1200-1300之间的员工向信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> salary <span class="token operator">between</span> <span class="token number">1200</span> <span class="token operator">and</span> <span class="token number">1300</span><span class="token punctuation">;</span>
<span class="token comment">-- 4.查询出姓&quot;刘&quot;的员工的工号,姓名,家庭住址</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">like</span> <span class="token string">&#39;刘%&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 5.将李四的家庭地址改为广东韶关</span>
<span class="token keyword">update</span> employees
<span class="token keyword">set</span> addr <span class="token operator">=</span><span class="token string">&#39;广东韶关&#39;</span>
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- 6.查询名字中带&#39;小&#39;的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&#39;%小%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="数据类型概述" tabindex="-1"><a class="header-anchor" href="#数据类型概述" aria-hidden="true">#</a> 数据类型概述</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1.创建数据库指定字符集</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> db_test_11 <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.整形数据类型</span>
<span class="token keyword">use</span> db_test_11<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test_int1
<span class="token punctuation">(</span>
    f1 <span class="token keyword">tinyint</span><span class="token punctuation">,</span>
    f2 <span class="token keyword">smallint</span><span class="token punctuation">,</span>
    f3 <span class="token keyword">mediumint</span><span class="token punctuation">,</span>
    f4 <span class="token keyword">int</span><span class="token punctuation">,</span>
    f5 <span class="token keyword">bigint</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> test_int1<span class="token punctuation">;</span>

<span class="token comment">-- 定点数decimal ,解决浮点数精度问题.高精度小时,decimal(M,D),M精度,D标度</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">add</span> create_time <span class="token keyword">timestamp</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>
<span class="token comment">-- 获取时间戳</span>
<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 外键约束</span>
<span class="token comment">-- 先创建主表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> db_test_11<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建主表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> my_departments
<span class="token punctuation">(</span>
    department_id   <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    department_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再创建从表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> my_employees
<span class="token punctuation">(</span>
    employee_id   <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    employee_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    department_id <span class="token keyword">int</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>表级约束</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">constraint</span> fk_empl_dept_id <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">references</span> my_departments <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">references</span> my_departments <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">set</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">desc</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">desc</span> my_departments<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查询所有约束</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>TABLE_CONSTRAINTS
<span class="token keyword">where</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">&#39;my_employees&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 先在主表插入数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> my_departments <span class="token punctuation">(</span>department_id<span class="token punctuation">,</span> department_name<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&#39;IT&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_departments<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 再在从表插入数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> my_employees<span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span> employee_name<span class="token punctuation">,</span> department_id<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">&#39;宋红康&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 删除数据要先删除从表的数据,再删除主表数据</p><p>-- 外键同步更新/删除 ,建议使用同步更新,并且使用&#39;on update cascade on delete restrict &#39;</p><p>从表中设置</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">references</span>  my_departments<span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">set</span> <span class="token boolean">null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例: 从表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> my_employees
<span class="token punctuation">(</span>
    employee_id   <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    employee_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    department_id <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token comment">#表级约束,外键同步更新/删除</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">references</span> my_departments <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">set</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">references</span> my_departments <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">restrict</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 删除外键约束</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>TABLE_CONSTRAINTS
<span class="token keyword">where</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">&#39;my_employees&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> my_employees
    <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> fk_empl_dept_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- 查看表的索引</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> my_employees<span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span>  my_employees <span class="token keyword">drop</span> <span class="token keyword">index</span> <span class="token operator">&lt;</span>索引名<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="练习-10" tabindex="-1"><a class="header-anchor" href="#练习-10" aria-hidden="true">#</a> 练习</h2><p>已经存在数据库test04_emp，两张表emp2和dept2</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test04_emp<span class="token punctuation">;</span>
<span class="token keyword">use</span> test04_emp<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp2
<span class="token punctuation">(</span>
    id       <span class="token keyword">INT</span><span class="token punctuation">,</span>
    emp_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept2
<span class="token punctuation">(</span>
    id        <span class="token keyword">INT</span><span class="token punctuation">,</span>
    dept_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1. 向表emp2的id列中添加PRIMARY KEY约束</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
    <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
    <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> emp2<span class="token punctuation">;</span>

<span class="token comment">-- 2. 向表dept2的id列中添加PRIMARY KEY约束</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> dept2
    <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> dept2
    <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> dept2<span class="token punctuation">;</span>

<span class="token comment">-- 3. 向表emp2中添加列dept_id，并在其中定义FOREIGN KEY约束，与之相关联的列是dept2表中的id列。</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
    <span class="token keyword">add</span> <span class="token keyword">column</span> dept_id <span class="token keyword">int</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
    <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_emp2_dept_id <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">references</span> dept2 <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>TABLE_CONSTRAINTS
<span class="token keyword">where</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">&#39;emp2&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>练习2</p><blockquote><p>承接《第11章_数据处理之增删改》的综合案例。</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 1、创建数据库test01_library</span>

<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test01_library <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- 2、创建表 books，表结构如下：</span>

<span class="token keyword">use</span> test01_library<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> books
<span class="token punctuation">(</span>
    id      <span class="token keyword">int</span><span class="token punctuation">,</span>
    name    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    authors <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price   <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    pubdate <span class="token keyword">year</span><span class="token punctuation">,</span>
    note    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    num     <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> books<span class="token punctuation">;</span>

<span class="token comment">-- 3、使用ALTER语句给books按如下要求增加相应的约束</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">unique</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> books<span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> authors <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> price <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> pubdate <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> books
    <span class="token keyword">modify</span> num <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>练习3</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#1. 创建数据库test04_company</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test04_company <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">use</span><span class="token punctuation">;</span>
<span class="token comment">#2. 按照下表给出的表结构在test04_company数据库中创建两个数据表offices和employees</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> offices
<span class="token punctuation">(</span>
    officeCode <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    city       <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>         <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    address    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    country    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>         <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    postalCode <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> offices<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> employees
<span class="token punctuation">(</span>
    employeeNumber <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    last_name      <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>         <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    first_name     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>         <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    mobile         <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    officeCode     <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    job_title      <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>         <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    birth          <span class="token keyword">datetime</span>            <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    note           <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sex            <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">constraint</span> fk_employees_officeCode <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>officeCode<span class="token punctuation">)</span> <span class="token keyword">references</span> offices <span class="token punctuation">(</span>officeCode<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#3. 将表employees的mobile字段修改到officeCode字段后面 #</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">modify</span> mobile <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token keyword">unique</span> <span class="token keyword">after</span> officeCode<span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>

<span class="token comment">-- 4. 将表employees的birth字段改名为employee_birth</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">modify</span> employee_birth <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 5. 修改sex字段，数据类型为CHAR(1)，非空约束</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">modify</span> sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 6. 删除字段note</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">drop</span> <span class="token keyword">column</span> note<span class="token punctuation">;</span>

<span class="token comment">-- 7. 增加字段名favorite_activity，数据类型为VARCHAR(100)</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees
    <span class="token keyword">add</span> favorite_activity <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 8. 将表employees名称修改为employees_info</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees <span class="token keyword">rename</span> employees_info<span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> employees_info <span class="token keyword">rename</span> employees<span class="token punctuation">;</span>

<span class="token keyword">desc</span> employees_info<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="视图" tabindex="-1"><a class="header-anchor" href="#视图" aria-hidden="true">#</a> 视图</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> view_emp
<span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> my_atguigudb<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> v_employees <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v_employees<span class="token punctuation">;</span>

<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>
<span class="token keyword">update</span> employees
<span class="token keyword">set</span> phone_number <span class="token operator">=</span> <span class="token string">&#39;5386112&#39;</span>
<span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v_employees
<span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">view</span> v1_employees<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> year_salary<span class="token punctuation">)</span> <span class="token keyword">as</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token number">12</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v1_employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>针对多表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> departments <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> atguigudb<span class="token punctuation">.</span>departments<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> v_empl_dept <span class="token keyword">as</span>
<span class="token keyword">select</span> department_name<span class="token punctuation">,</span> last_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v_empl_dept<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>利用视图对数据进行格式化</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">view</span> v1_empl_dept<span class="token punctuation">(</span>name<span class="token punctuation">,</span> department_id<span class="token punctuation">,</span> department_name<span class="token punctuation">)</span> <span class="token keyword">as</span>
<span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>first_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span> <span class="token keyword">as</span> name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> department_name
<span class="token keyword">from</span> employees <span class="token keyword">as</span> e
         <span class="token keyword">join</span> departments <span class="token keyword">as</span> d
              <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">&gt;</span> <span class="token number">80</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v1_empl_dept<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基于视图创建视图</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">view</span> v2_empt_dept <span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v1_empl_dept<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v2_empt_dept<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看视图结构</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">desc</span> v2_empt_dept<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看视图属性信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">&#39;v2_empt_dept&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看视图定义信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> v2_empt_dept<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改和删除视图中的数据,不建议更新和删除视图中的数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 可以更新</span>

<span class="token keyword">update</span> v2_empt_dept
<span class="token keyword">set</span> department_id <span class="token operator">=</span><span class="token number">100</span>
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v2_empt_dept<span class="token punctuation">;</span>

<span class="token comment">-- 更新失败</span>

<span class="token keyword">update</span> v2_empt_dept
<span class="token keyword">set</span> name <span class="token operator">=</span><span class="token string">&#39;Hello,word&#39;</span>
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;Nancy,Greenberg&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> v2_empt_dept<span class="token punctuation">;</span>

<span class="token comment">-- 删除失败</span>

<span class="token keyword">delete</span>
<span class="token keyword">from</span> v2_empt_dept
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;Nancy,Greenberg&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> v2_empt_dept
<span class="token keyword">where</span> department_name <span class="token operator">=</span> <span class="token string">&#39;Executive&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span>
<span class="token keyword">from</span> v2_empt_dept
<span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="存储过程与函数" tabindex="-1"><a class="header-anchor" href="#存储过程与函数" aria-hidden="true">#</a> 存储过程与函数</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 创建存储过程</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_all_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 调用存储过程</span>

<span class="token keyword">call</span> select_all_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询employees最高薪资</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_emp_avg_salary<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">call</span> select_emp_avg_salary<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 带out参数</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_min_salary<span class="token punctuation">(</span><span class="token keyword">out</span> ms <span class="token keyword">double</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">into</span> ms <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">call</span> select_min_salary<span class="token punctuation">(</span><span class="token variable">@ms</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@ms</span><span class="token punctuation">;</span>

<span class="token comment">-- 带in参数,</span>

<span class="token comment">-- 查询某个员工的的工资</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_salary_by_name<span class="token punctuation">(</span><span class="token operator">in</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">call</span> select_salary_by_name<span class="token punctuation">(</span><span class="token string">&#39;King&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 带in和out</span>

<span class="token comment">-- 查询employees中某个员工的工资,用out参数输出工资</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_salary_by_id<span class="token punctuation">(</span><span class="token operator">in</span> id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">out</span> sal <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> salary <span class="token keyword">into</span> sal <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> id<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>
<span class="token keyword">call</span> select_salary_by_id<span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token variable">@sal</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@sal</span> <span class="token keyword">as</span> sal<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="into" tabindex="-1"><a class="header-anchor" href="#into" aria-hidden="true">#</a> into</h4><h4 id="练习-11" tabindex="-1"><a class="header-anchor" href="#练习-11" aria-hidden="true">#</a> 练习</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_manager_name_by_employee_name<span class="token punctuation">(</span><span class="token keyword">inout</span> employee_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> last_name
    <span class="token keyword">into</span> employee_name
    <span class="token keyword">from</span> employees
    <span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> manager_id
                         <span class="token keyword">from</span> employees
                         <span class="token keyword">where</span> last_name <span class="token operator">=</span> employee_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@employee_name</span> <span class="token operator">=</span> <span class="token string">&#39;Kochhar&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> select_manager_name_by_employee_name<span class="token punctuation">(</span><span class="token variable">@employee_name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@employee_name</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="存储函数" tabindex="-1"><a class="header-anchor" href="#存储函数" aria-hidden="true">#</a> 存储函数</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 练习,创建存储函数,参数为空,查询Abel的email</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">function</span> select_email<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">returns</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
    <span class="token keyword">deterministic</span>
    <span class="token keyword">contains</span> <span class="token keyword">sql</span>
    <span class="token keyword">reads</span> <span class="token keyword">sql</span> <span class="token keyword">data</span>
<span class="token keyword">begin</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">select</span> email <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">&#39;Abel&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">select</span> select_email<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 练习,通过employee_id查询email</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">function</span> select_email_by_id<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">)</span>
    <span class="token keyword">returns</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
    <span class="token keyword">reads</span> <span class="token keyword">sql</span> <span class="token keyword">data</span>
<span class="token keyword">begin</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">select</span> email <span class="token keyword">from</span> employees <span class="token keyword">where</span> id <span class="token operator">=</span> employee_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">select</span> select_email_by_id<span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">)</span> <span class="token keyword">as</span> email<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="系统变量和会话变量" tabindex="-1"><a class="header-anchor" href="#系统变量和会话变量" aria-hidden="true">#</a> 系统变量和会话变量</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">global</span> variables<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">session</span> variables<span class="token punctuation">;</span>

<span class="token keyword">select</span> @<span class="token variable">@global.admin_port</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> @<span class="token variable">@session.binlog_row_image</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义变量" tabindex="-1"><a class="header-anchor" href="#自定义变量" aria-hidden="true">#</a> 自定义变量</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 方式一</span>
<span class="token keyword">set</span> <span class="token variable">@m1</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@m2</span> :<span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@m3</span> :<span class="token operator">=</span> <span class="token variable">@m1</span> <span class="token operator">+</span> <span class="token variable">@m2</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@m3</span><span class="token punctuation">;</span>
<span class="token comment"># 方式2</span>
<span class="token keyword">set</span> <span class="token variable">@sum_salary</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@sum_salary</span> :<span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@sum_salary</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">into</span> <span class="token variable">@avg_salary</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@avg_salary</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="局部变量" tabindex="-1"><a class="header-anchor" href="#局部变量" aria-hidden="true">#</a> 局部变量</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_emp_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> a <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">declare</span> b <span class="token keyword">int</span><span class="token punctuation">;</span>
    <span class="token keyword">declare</span> emp_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> last_name <span class="token keyword">into</span> emp_name <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> b <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">select</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> emp_name<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">call</span> select_emp_info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="流程控制" tabindex="-1"><a class="header-anchor" href="#流程控制" aria-hidden="true">#</a> 流程控制</h2><h3 id="分支结构之if" tabindex="-1"><a class="header-anchor" href="#分支结构之if" aria-hidden="true">#</a> 分支结构之if</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> select_salary_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> emp_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> emp_name <span class="token operator">is</span> <span class="token boolean">null</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;emp_name is null&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
<span class="token keyword">call</span> select_salary_info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="练习1" tabindex="-1"><a class="header-anchor" href="#练习1" aria-hidden="true">#</a> 练习1</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> test_if01<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> age <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> age <span class="token operator">&lt;</span> <span class="token number">6</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;婴儿&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> age <span class="token operator">&gt;=</span> <span class="token number">6</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">12</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;儿童&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> age <span class="token operator">&gt;</span> <span class="token number">12</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">18</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;少年&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> age <span class="token operator">&gt;</span> <span class="token number">18</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">60</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;中年&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> age <span class="token operator">&gt;</span> <span class="token number">60</span>
    <span class="token keyword">then</span>
        <span class="token keyword">select</span> <span class="token string">&#39;老年&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token keyword">select</span> <span class="token string">&#39;其他&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">call</span> test_if01<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="游标使用" tabindex="-1"><a class="header-anchor" href="#游标使用" aria-hidden="true">#</a> 游标使用</h2><h3 id="申明-打开-使用-关闭" tabindex="-1"><a class="header-anchor" href="#申明-打开-使用-关闭" aria-hidden="true">#</a> 申明,打开,使用,关闭</h3><blockquote><p>创建存储过程“get_count_by_limit_total_salary()”，声明IN参数 limit_total_salary，DOUBLE类型；声明</p><p>OUT参数total_count，INT类型。函数的功能可以实现累加薪资最高的几个员工的薪资值，直到薪资总和</p><p>达到limit_total_salary参数的值，返回累加的人数给total_count。</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">procedure</span> get_count_by_limit_total_salary<span class="token punctuation">(</span><span class="token operator">in</span> limit_total_salary <span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">out</span> total_count <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token comment">#  申明局部变量</span>
    <span class="token keyword">declare</span> sum_salary <span class="token keyword">double</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment"># 记录累加的总工资</span>
    <span class="token keyword">declare</span> cursor_salary <span class="token keyword">double</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment"># 每次游标的工资</span>
    <span class="token keyword">declare</span> emp_count <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="申明游标" tabindex="-1"><a class="header-anchor" href="#申明游标" aria-hidden="true">#</a> 申明游标</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">declare</span> emp_salary_cursor <span class="token keyword">cursor</span> <span class="token keyword">for</span> <span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="打开游标" tabindex="-1"><a class="header-anchor" href="#打开游标" aria-hidden="true">#</a> 打开游标</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">open</span> emp_salary_cursor<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="获取游标数据" tabindex="-1"><a class="header-anchor" href="#获取游标数据" aria-hidden="true">#</a> 获取游标数据</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">repeat</span>
    <span class="token keyword">fetch</span> emp_salary_cursor <span class="token keyword">into</span> cursor_salary<span class="token punctuation">;</span>
    <span class="token keyword">set</span> sum_salary <span class="token operator">=</span> sum_salary <span class="token operator">+</span> cursor_salary<span class="token punctuation">;</span>
    <span class="token keyword">set</span> emp_count <span class="token operator">=</span> emp_count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
until sum_salary <span class="token operator">&gt;=</span> limit_total_salary <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>

<span class="token keyword">set</span> total_count <span class="token operator">=</span> emp_count<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关闭游标" tabindex="-1"><a class="header-anchor" href="#关闭游标" aria-hidden="true">#</a> 关闭游标</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">close</span> emp_salary_cursor<span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">call</span> get_count_by_limit_total_salary<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token variable">@total_count</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@total_count</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建触发器" tabindex="-1"><a class="header-anchor" href="#创建触发器" aria-hidden="true">#</a> 创建触发器</h2><blockquote><p>定义触发器“salary_check_trigger”，基于员工表“employees”的INSERT事件，在INSERT之前检查</p><p>将要添加的新员工薪资是否大于他领导的薪资，如果大于领导薪资，则报sqlstate_value为&#39;HY000&#39;的错</p><p>误，从而使得添加失败。</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>

<span class="token keyword">delimiter</span> $
<span class="token keyword">create</span> <span class="token keyword">trigger</span> salary_check_trigger
    before <span class="token keyword">insert</span>
    <span class="token keyword">on</span> employees
    <span class="token keyword">for each row</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> manager_salary <span class="token keyword">double</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> salary <span class="token keyword">into</span> manager_salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> employee_id <span class="token operator">=</span> NEW<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
    <span class="token keyword">if</span> NEW<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> manager_salary <span class="token keyword">then</span>
        signal sqlstate <span class="token string">&#39;HY000&#39;</span> <span class="token keyword">set</span> MESSAGE_TEXT <span class="token operator">=</span> <span class="token string">&#39;薪资高于领导薪资错误&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">show</span> triggers <span class="token punctuation">;</span>
<span class="token keyword">desc</span> employees<span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> employees<span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span>
                      manager_id<span class="token punctuation">,</span>email<span class="token punctuation">,</span>hire_date<span class="token punctuation">,</span>job_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">207</span><span class="token punctuation">,</span> <span class="token string">&#39;Jerry&#39;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">147</span><span class="token punctuation">,</span><span class="token string">&#39;haha@163.com&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2017-01-01&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> employees<span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span>
                      manager_id<span class="token punctuation">,</span>email<span class="token punctuation">,</span>hire_date<span class="token punctuation">,</span>job_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">207</span><span class="token punctuation">,</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">,</span> <span class="token number">147</span><span class="token punctuation">,</span><span class="token string">&#39;haha@163.com&#39;</span><span class="token punctuation">,</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;IT_PROG&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com//anran919/edit/main/docs/posts/sql/MySQL学习记录.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><!----></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: anran0919@163.com">张安然</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/zar_blog/posts/sql/MySQL%E8%BF%9B%E9%98%B6-%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3.html" class="nav-link prev" aria-label="MySQL基本操作.md"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->MySQL基本操作.md</div></a><a href="/zar_blog/posts/sql/MYSQL%E7%9A%84%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4.html" class="nav-link next" aria-label="MySql的修改和删除.md"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">MySql的修改和删除.md<!----></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">从此故乡只有冬，再无春夏秋</div><div class="copyright">Copyright © 2023 张安然</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/zar_blog/assets/app-c1511fcf.js" defer></script>
  </body>
</html>
